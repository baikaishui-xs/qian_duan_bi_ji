**参考文档：** `https://blog.csdn.net/androidioskl/article/details/125902018`

**概念：** JS 代码在执行前需要先解析代码，而解析代码需要在执行上下文环境中进行，执行上下文环境分为全局执行上下文环境和函数执行上下文环境

# 全局执行上下文环境
**概念：** js 引擎首次遇到 `<script>` 标签，就会产生全局执行上下文环境，任何不在函数内部的代码都会进入全局执行上下文环境中执行，一个程序中只有一个全局执行上下文环境

# 函数执行上下文环境
**概念：** 函数每次被调用后，就会为产生一个新的函数执行上下文环境，函数中的代码会进入函数执行上下文环境中执行，一个程序中可以存在多个函数执行上下文环境

# 执行栈
js 引擎在创建执行上下文环境前会先创建一个栈，用于存储和管理执行上下文环境，这个栈就是执行栈

# 执行上下文的生命周期
## 创建阶段
### 全局执行上下文环境在创建阶段主要做的事情
1、js 引擎首先会创建一个全局的 window 对象
2、将 this 指向这个全局的对象
3、变量提升和函数提升。将所有全局变量和全局函数提升到当前作用域的最前面，变量赋值为 undefined，函数赋值为 fun
4、将变量和函数添加到全局对象上
5、将执行上下文环境放到执行栈中

### 函数执行上下文环境在创建阶段做的事情
1、对形参进行赋值
2、初始化 arguments 变量
3、变量提升和函数提升。将所有全局变量和全局函数提升到当前作用域的最前面，变量赋值为 undefined，函数赋值为 fun
4、创建作用域链
5、将执行上下文环境放到执行栈中

## 执行阶段
从上往下一行一行执行代码

## 回收阶段
执行上下文环境出栈，等待虚拟机回收