# 知识点：单线程（同步） 与 多线程（异步）

## 一、单线程（同步）

**同步任务：** 非耗时任务

**特性：**
1. 上一个任务结束，才会执行下一个任务
2. 由 主线程 执行

**缺点：** 上一个任务执行时间过长，会导致页面渲染加载阻塞

```js
console.log(1);
console.log(2);
console.log(3);
```

## 二、多线程（异步）

**异步任务：** 耗时任务

**特性：**
1. 不需要等待上一个任务结束，就可以执行下一个任务
2. 委派给宿主环境执行，执行完毕后，通知JS主线程执行回调函数

**宿主环境：** 浏览器、node

**原理：** 通过回调函数实现

**异步类型：**
1. 普通事件  如：click、resize
2. 资源加载  如：load、error
3. 定时器

```js
console.log(1);
setTimeout(function () {
console.log(3);
}, 0);
console.log(2);
```

## JS 执行机制

**围绕三部分执行：**
1. **JS 主线程（堆/栈）：** 在栈中寻找任务，依次执行
2. **宿主环境：** 执行异步耗时任务
3. **任务队列：** 存放回调函数

**执行机制：**
1. 从上到下执行主线程中的同步任务和异步任务到任务队列中
2. 当栈中的所有同步任务执行完毕，再去任务队列中依次执行异步任务的回调函数

**事件循环机制：** 执行栈获取任务队列里的异步任务，然后执行，再获取，再执行的重复过程